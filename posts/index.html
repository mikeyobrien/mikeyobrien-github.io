<!DOCTYPE html>
<html>
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Blog Posts - Mikey O&#39;Brien</title>
<meta name="description" content="">

<link rel="alternate" type="application/rss+xml" title="RSS" href="/rss/">

<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="/favicon.png">

<link rel="stylesheet" href="/css/style.css?rnd=1586647033" />

<meta property="og:title" content="Blog Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://example.org/posts/" />
<meta property="og:updated_time" content="2019-12-16T00:00:00-06:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Blog Posts"/>
<meta name="twitter:description" content=""/>







    
</head>
<body>
    <div class="container">
        <header>
            
                <div class="header">
<h1 class="site-header">
    <a href="http://example.org/">Mikey O&#39;Brien</a>
</h1>
    <nav>
        
        
          <a class="navtext" href="/about/" title="">Software Engineer | Austin, TX</a>
        
    </nav>
</div>

            
        </header>
        <main>
            
	<main>
		
		<div>
			<h1>Blog Posts</h1>
			<div><h2 id="setting-up-postgresql-on-macos">Setting up PostgreSQL on MacOS</h2>
<p>For this tutorial we will be using postgres.app from the folks at <a href="https://eggerapps.at/">https://eggerapps.at/</a> to install and setup a local development server on macOS.</p>
<p>Download and install using the instructions at <a href="https://postgresapp.com/">https://postgresapp.com/</a></p>
<p>Start postgres from the applications folder
Ensure the CLI tools are working by typing,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">createdb
</code></pre></div><p>This should result in the following error if everything was installed correctly,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">createdb: database creation failed: ERROR: database <span style="color:#e6db74">&#34;username&#34;</span> already exists
</code></pre></div><p>To create your development db enter into the console,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">createdb devdb
</code></pre></div><p>If for whatever reason this db needs to be removed use,</p>
<pre><code class="language-nil" data-lang="nil">dropdb devdb
</code></pre><p>Access the db we have just created,</p>
<pre><code class="language-nil" data-lang="nil">psql devdb
</code></pre><p>This should drop you into an interactive terminal program where we will be able to enter, edit, and execute sql commands.</p>
<p>From here you can also execute internal psql commands beginning with the backslash character, &ldquo;&quot;,
that are not SQL commands.</p>
<p>You can see what commands are available to you with the help command,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">devdb<span style="color:#f92672">=</span><span style="color:#75715e"># help</span>
You are using psql, the command-line interface to PostgreSQL.
Type:  <span style="color:#ae81ff">\c</span>opyright <span style="color:#66d9ef">for</span> distribution terms
       <span style="color:#ae81ff">\h</span> <span style="color:#66d9ef">for</span> help with SQL commands
       <span style="color:#ae81ff">\?</span> <span style="color:#66d9ef">for</span> help with psql commands
       <span style="color:#ae81ff">\g</span> or terminate with semicolon to execute query
       <span style="color:#ae81ff">\q</span> to quit
</code></pre></div><h2 id="moving-from-san-diego-to-austin">Moving from San Diego to Austin</h2>
<p>A couple of months ago an opportunity opened up at work to move to Austin,
Texas. I toyed with the idea of making the move but never took it seriously.
Next thing you know, the lease on my apartment at the time was about to end and
I still had not found a new place to live in San Diego. Queue time to take the
decision seriously. Growing up and attending college in San Diego I felt like it
would be a good time to experience something new and committed to going. And,
after a hectic two months of moving halfway across the country, I'm finally
starting to settle in. Here are some things I've learned leading up to the move
and what I've learned from a little over a month in Austin.</p>
<h3 id="start-as-early-as-possible">Start as early as possible</h3>
<p>Moving across the country with one month notice is certainly possible but I'd
highly recommend against it. My girlfriend and I had a little less than a month
to find a place to live, pack, ship, and drive out to Texas to avoid being
homeless. We were fortunate my family in San Antonio was able to view apartments
for us. If not we would have been rushed into picking a place to live. Spreading
out the cadence at which you pack, donate, and sell items relieves a lot of the
pressure of the move. Make the months prior as easy possible by starting as soon
as you can.</p>
<h3 id="save-money-by-shipping">Save money by shipping</h3>
<p>Initially, we thought of using a moving company to pack up our belongings and
move them to Austin for us. While this would be the most painless route, expect
to burn a huge hole in your pocket. Our next option was to throw our belongings
in a U-Haul and drive them ourselves. That too was costlier then we had
expected. Especially taking into account the actual value of everything.</p>
<p>We settled on packing whatever valuables we could fit into the back of my car
and use Amtrak's shipping services for the rest (clothes, books, kitchen goods,
etc). What didn't fit we shipped using UPS which could have been saved even
further by shopping shipping services. For furniture, we realized we could
donate or sell most of it and rebuy the same furniture and still save. Overall
we offset the costs by more than half and were able to redistribute the costs of
buying new furniture to after the move. This option may not work for everyone
but is worth taking into account if you're willing to part with most of your
belongings and start over.</p>
<h3 id="austin-feels-small">Austin feels small</h3>
<p>This one is subjective. Coming from San Diego and spending a significant time in
LA. Austin feels small. The small neighboring city of Round Rock is 21 minutes
north of Downtown Austin. My hometown of Mira Mesa in San Diego is 25 minutes
from Downtown San Diego yet we're still considered to be in the city of San
Diego. Everything feel's closer then I am accustomed to. This doesn't mean your
commute will be short though. Austin is supposedly notorious for its traffic.
Although nothing out of the ordinary compared to LA or San Francisco.</p>
<h3 id="texans-are-nice">Texans are nice</h3>
<p>It will take a while to get used to how nice people have been in Texas. It's
downright strange at times. Friendly&hellip; but strange. Just the other day we were
in the parking lot with our throw pillow haul from HomeGoods when a random
stranger was genuinely excited for us when he saw that we had bought pillows.
The week prior we were at Whole Foods when the cashier complimented on our
choice of breakfast tacos and asked about our plans for the day. I promised I'm
not trying to be rude when I stare at you with a confused smile I just don't
know how to react yet.</p>
<h3 id="it-seems-as-techie-as-they-say">It seems as techie as they say</h3>
<p>I don't have a large sample size to build on but five of the six people on our
TopGolf league team works for tech companies. It isn't shocking to see large
tech company offices as you drive through Austin. This is a stark contrast to
what I'd experienced in Southern California.</p>
<h3 id="californians-are-everywhere">Californians are everywhere</h3>
<p>This may not come as a surprise to those who have lived in Austin for years but
it certainly surprised me how noticeable it was. In our apartment complex alone
I've spotted 5 California plates. Out and about it's not unusual to see people
representing their hometown teams. A recent post on culturemap estimated from
2010 to 2014 the Austin area gained on average 8 Californians per day. This was
prior to Austin being named &ldquo;Best City to Live&rdquo; two years in a row by U.S. News
and World Report. It's hard to imagine the influx to stop as long as
California's cost of living continues to rise. We are sorry.</p>
<h3 id="the-food-has-been-outstanding">The food has been outstanding</h3>
<p>I was concerned about moving away from the land of California burritos in San
Diego and the sprawling food metropolitan of LA but Austin was quick to quell
those concerns. The BBQ is amazing and I have yet to go to the BBQ capital of
Texas 35 minutes south in Lockhart. Breakfast Tacos may not be as good as San
Diego burritos but they will definitely keep me satisfied until I go back. The
pho I've tried easily competes with the best I've had in Little Saigon. The
xiaolongbao (soup dumplings) are better than any I've had in San Diego prior to
Din Tai Fung opening. We have most of the top burger places, Hop Doddy, Shake
Shack, Whataburger, In-n-out, and Austin's very own P Terry's (which was a
pleasant surprise). And from my understanding, this is only the tip of the
iceberg. I'm looking forward to eating my way through Austin as the months roll
by.</p>
<h3 id="your-money-goes-a-long-way-relative-to-california">Your money goes a long way relative to California</h3>
<p>As most know, one of the driving forces for the influx of new Austin residents
is the cost of living. It was one of the driving forces for me. I've noticed
this most in the cost of gas and housing. Prior to leaving San Diego, it would
cost anywhere from $3.70-$4.00 per gallon to fill up my tank. In Austin, it's
been anywhere from $2.40-$2.80 per gallon. My Austin apartment costs roughly the
same as the one I had in Oceanside except for its 3 years old versus 30 years
old. The gym has more than 3 treadmills and the washing machine and dryer are
in-unit. Getting the same quality apartment in San Diego would have cost upwards
of 50% more depending on the location. On top of the general day-to-day
expenses, Texas has no state income tax. There's a downside to all this though,
I've been made aware of the cost of living going up and going up fast. Housing
prices in some neighborhoods reflect those in California, some residents are
being forced out of neighborhoods they've lived in for generations. It's
unfortunate. Hopefully, it doesn't snowball into the issues we are seeing in the
bay area.</p>
<h3 id="conclusion">Conclusion</h3>
<p>It has only been a month but so far Austin has exceeded all expectations and I
look forward to experiencing what more this city has to offer. It will be
interesting to see how my opinion of Austin changes over the course of a year
and will follow up on this post then. If you've moved to Austin from another
state, I'd love to hear your thoughts.</p>
<h2 id="setting-up-openvpn-on-gcp">Setting up OpenVPN on GCP</h2>
<p>At work I've recently been assigned with analyzing Ransomware samples to improve
our detection heuristics. As an extra precaution I've set up OpenVPN on a GCP
instance to ensure my home IP is not being captured by bad actors.</p>
<p>If you don't use GCP and would like to use this as a guide for another cloud
provider feel free, as the same general steps apply.</p>
<h3 id="compute-instance-configuration">Compute Instance Configuration</h3>
<p>First, create a compute instance from the cloud console. Allow HTTP and HTTPS
traffic. If you want to force HTTPS, only select the allow HTTPS traffic option.</p>
<p>Once the instance is up and running, go to VPC network -&gt; External IP Addresses
from the selection drawer in the top left. Change the external ip address for
the new VM instance from Ephemeral to Static.</p>
<p>Lastly, we need to setup the firewall rules for openvpn traffic. Select firewall
rules from the side tab, then click select &lsquo;Create Firewall Rule&rsquo;. Name the
first rule openvpn-ingress. Change the following,</p>
<p>#+BEGIN_SRC
Target tags: openvpn Source filter: 0.0.0.0/0 (if you will be accessing openvpn
from a static address, for example 1.2.3.4, you can change the filter to
(1.2.3.4/32) for added security.) Protocols and ports: udp 1194 (you can
customize this during openvpn setup or use the default) #+END_SRC</p>
<p>Change the same settings for an openvpn-egress rule, but change the direction of
traffic to egress.</p>
<p>That should be all the setup from the GCP Console.</p>
<h3 id="configuring-the-compute-instance-dot">Configuring the compute instance.</h3>
<p>SSH into the compute instance. If you have the Google Cloud SDK installed and
configured for your account run,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">gcloud compute ssh vpn <span style="color:#75715e">#+END_SRC</span>

From the compute instance we<span style="color:#e6db74">&#39;ll use the setup script from
</span><span style="color:#e6db74">https://github.com/angristan/openvpn-install to expedite the openvpn install
</span><span style="color:#e6db74">process.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Get the script and make it executable:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#+BEGIN_SRC sh
</span><span style="color:#e6db74">curl -O
</span><span style="color:#e6db74">https://raw.githubusercontent.com/Angristan/openvpn-install/master/openvpn-install.sh
</span><span style="color:#e6db74">chmod +x openvpn-install.sh #+END_SRC
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Run the script,
</span><span style="color:#e6db74">#+BEGIN_SRC
</span><span style="color:#e6db74">./openvpn-install.sh #+END_SRC
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Change the IP address to the static address assigned to the instance. Hit enter
</span><span style="color:#e6db74">for default selections for IPv6 support, listening port, protocol, dns resolver,
</span><span style="color:#e6db74">compression, and encryption
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">#+BEGIN_SRC sh
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Your host does not appear to have IPv6 connectivity.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Do you want to enable IPv6 support (NAT)? [y/n]: n
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">What port do you want OpenVPN to listen to?
</span><span style="color:#e6db74">   1) Default: 1194
</span><span style="color:#e6db74">   2) Custom
</span><span style="color:#e6db74">   3) Random [49152-65535]
</span><span style="color:#e6db74">Port choice [1-3]: 1
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">What protocol do you want OpenVPN to use? UDP is faster. Unless it is not
</span><span style="color:#e6db74">available, you shouldn&#39;</span>t use TCP.
   1<span style="color:#f92672">)</span> UDP
   2<span style="color:#f92672">)</span> TCP
Protocol <span style="color:#f92672">[</span>1-2<span style="color:#f92672">]</span>: <span style="color:#ae81ff">1</span>

What DNS resolvers <span style="color:#66d9ef">do</span> you want to use with the VPN?
   1<span style="color:#f92672">)</span> Current system resolvers <span style="color:#f92672">(</span>from /etc/resolv.conf<span style="color:#f92672">)</span>
   2<span style="color:#f92672">)</span> Self-hosted DNS Resolver <span style="color:#f92672">(</span>Unbound<span style="color:#f92672">)</span>
   3<span style="color:#f92672">)</span> Cloudflare <span style="color:#f92672">(</span>Anycast: worldwide<span style="color:#f92672">)</span>
   4<span style="color:#f92672">)</span> Quad9 <span style="color:#f92672">(</span>Anycast: worldwide<span style="color:#f92672">)</span>
   5<span style="color:#f92672">)</span> Quad9 uncensored <span style="color:#f92672">(</span>Anycast: worldwide<span style="color:#f92672">)</span>
   6<span style="color:#f92672">)</span> FDN <span style="color:#f92672">(</span>France<span style="color:#f92672">)</span>
   7<span style="color:#f92672">)</span> DNS.WATCH <span style="color:#f92672">(</span>Germany<span style="color:#f92672">)</span>
   8<span style="color:#f92672">)</span> OpenDNS <span style="color:#f92672">(</span>Anycast: worldwide<span style="color:#f92672">)</span>
   9<span style="color:#f92672">)</span> Google <span style="color:#f92672">(</span>Anycast: worldwide<span style="color:#f92672">)</span>
   10<span style="color:#f92672">)</span> Yandex Basic <span style="color:#f92672">(</span>Russia<span style="color:#f92672">)</span>
   11<span style="color:#f92672">)</span> AdGuard DNS <span style="color:#f92672">(</span>Russia<span style="color:#f92672">)</span>
DNS <span style="color:#f92672">[</span>1-10<span style="color:#f92672">]</span>: <span style="color:#ae81ff">3</span>

Do you want to use compression? It is not recommended since the VORACLE attack
make use of it. Enable compression? <span style="color:#f92672">[</span>y/n<span style="color:#f92672">]</span>: n

Do you want to customize encryption settings? Unless you know what you<span style="color:#e6db74">&#39;re doing,
</span><span style="color:#e6db74">you should stick with the default parameters provided by the script. Note that
</span><span style="color:#e6db74">whatever you choose, all the choices presented in the script are safe. (Unlike
</span><span style="color:#e6db74">OpenVPN&#39;</span>s defaults<span style="color:#f92672">)</span> See
https://github.com/angristan/openvpn-install#security-and-encryption to learn
more.

Customize encryption settings? <span style="color:#f92672">[</span>y/n<span style="color:#f92672">]</span>: n

Okay, that was all I needed. We are ready to setup your OpenVPN server now. You
will be able to generate a client at the end of the installation. Press any key
to <span style="color:#66d9ef">continue</span>...
<span style="color:#ae81ff">12345678910111213141516171819202122232425262728293031323334353637383940414243</span>
</code></pre></div><p>Continue with the installation.</p>
<p>After the installation succeeds you'll be prompted with the client name and
password/passwordless security settings for the machine you intend to connect to
the server.</p>
<p>Lastly, the instance needs to be configured to forward ipv4 packets.</p>
<p>Edit /etc/sysctl.conf and uncommment,
#+BEGIN_SRC conf
-#net.ipv4.ip_forward=1 net.ipv4.ip_forward=1 #+END_SRC</p>
<p>The OpenVPN server should now be up and running.</p>
<h3 id="client-setup">Client Setup</h3>
<p>From your client machine run,</p>
<pre><code class="language-nil" data-lang="nil">gcloud compute scp &lt;username&gt;@&lt;instance&gt;:~/&lt;clientname&gt;.ovpn .
</code></pre><p>Import that config into your openvpn client and connect. If everything
configured correctly you should see the ip of your compute instance when
searching &ldquo;whats my ip&rdquo; on google.</p>
<h2 id="a-new-start">A New Start</h2>
<p>I've been meaning to start a blog for awhile now. In reality, I have a couple
times now. Both times life got in the way from fully dedicating the time to
write quality posts. Not this time. Seriously. I believe documentating one's
experiences and challenges in life is a rewarding activity (for both parties). I
don't remember how many time's over the past year and a half of my professional
career I've looked for the same exact blog to do the same exact thing that I've
forgotten for the 10th time. Hopefully I could be that resource for another
individual on their 10th attempt to complete a task. If not hopefully I can be
at least a source of entertainment.</p>
<p>Anyway, this blog will be focused on my life as a software engineer, with some
personal asides thrown in. You can expect mostly opinions on technical subjects,
documentation on how I completed/implemented X, how X tool helped me be more
productive, how X tool sucks, etc. Just don't be surprised when random posts are
thrown in about books I've read, trips I've taken, or other personal life
stories get grouped in. Looking forward to having anyone along for the journey -
if not, future me, here's to recording what I've learned and what I've
experienced. I know reflecting on it will be more than worth it.</p>
<h2 id="creating-a-mevn-stack-boilerplate">Creating a MEVN stack boilerplate</h2>
<p>This post will cover the basic steps needed to set up a project using the MEVN
stack (mongo, express, vue, and nginx). Prior warning, if you are looking for a
tutorial on creating a web application using the MEVN stack you may want to look
elsewhere. I'll only be covering the basic project structure, packages, and
tools necessary to get started.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Basic understanding of javascript</li>
<li>Commandline familiarity</li>
<li>Familiarity with NPM</li>
</ul>
<p>To be begin we first need to insure that node is installed on the machine. We
will be using the vue-cli tool to generate the project. To check that it is
installed try running,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ node --version
</code></pre></div><p>If a version number isn't installed we can install nodejs with the following,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
$ sudo apt-get install -y nodejs
</code></pre></div><p>Now that nodejs and npm are installed we can begin the process of setting up our vue and express project folder.</p>
<p>First install vue-cli:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm install -g vue-cli
</code></pre></div><p>Now that vue-cli is installed we can use webpack template to generate a vue project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ vue init webpack project
</code></pre></div><p>For this particular project, choose the default settings for everything. Once
finished initializing, move to the newly generated project folder</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cd project
</code></pre></div><p>Now that we're in our root project folder we'll create a server subdirectory
that will contain the backend express code,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir server
</code></pre></div><p>Once we're all set up the directory structure will look like this,</p>
<pre><code class="language-nil" data-lang="nil">project/
├── build
├── config
├── node_modules
├── server
├── src
├── static
├── test
├── README.md
├── index.html
├── package-lock.json
└── package.json
</code></pre><h3 id="backend-configuration">Backend Configuration</h3>
<p>We're now ready to setup our express backend and link it to mongodb using the
mongoose library.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cd server
$ npm init
</code></pre></div><p>Let's being with installing the basic packages that are required for our
application</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm install --save express cors morgan body-parser mongoose
</code></pre></div><ul>
<li>express is used for handling http requests and responses.</li>
<li>cors allows cross-origin resource sharing.</li>
<li>morgan is an express middleware for logging.</li>
<li>body-parser will parse incoming request bodies before hitting handlers.</li>
<li>mongoose will be used to connect to our mongo db.</li>
</ul>
<p>In the server directory, make a new directory src to hold all our backend source code, and create the app.js file,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir src <span style="color:#f92672">&amp;&amp;</span> touch src/app.js
</code></pre></div><p>Also, create our models directory to hold our future schemas,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir models
</code></pre></div><p>Edit the new app.js file to contain all our installed packages,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">express</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;express&#39;</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bodyParser</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;body-parser&#39;</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cors</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;cors&#39;</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">morgan</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;morgan&#39;</span>)
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">mongoose</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;mongoose&#39;</span>);

<span style="color:#75715e">// Express configuration
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>()
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">morgan</span>(<span style="color:#e6db74">&#39;combined&#39;</span>))
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">bodyParser</span>.<span style="color:#a6e22e">json</span>())
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">cors</span>())
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">8081</span>)

<span style="color:#75715e">// Mongoose configuration
</span><span style="color:#75715e"></span><span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#e6db74">&#39;mongodb://localhost:27017/project&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">db</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">connection</span>;
<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#34;error&#34;</span>, <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">bind</span>(<span style="color:#a6e22e">console</span>, <span style="color:#e6db74">&#34;connection error&#34;</span>));
<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">once</span>(<span style="color:#e6db74">&#34;open&#34;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">callback</span>){
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Connection Succeeded&#34;</span>);
});

<span style="color:#75715e">// Test handler
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/test&#39;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(
    [{
      <span style="color:#a6e22e">serviceName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;test&#39;</span>,
      <span style="color:#a6e22e">isRunning</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
    }]
  )
})
</code></pre></div><p>Let's run the application,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ node app.js
</code></pre></div><p>You'll most likely see the connection error printed to the console. If so,
follow the steps to install the community edition for your OS at,
<a href="https://docs.mongodb.com/manual/administration/install-community/">https://docs.mongodb.com/manual/administration/install-community/</a></p>
<p>Now that mongodb is installed let's try that again.</p>
<p>Hopefully we now see &ldquo;Connection Succeeded&rdquo;.</p>
<p>Running the server app using node app.js isn't very convenient, lets install
nodemon so everytime our server code is updated we reload the backend code,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm install --save nodemon
</code></pre></div><p>Edit package.json to contain the following script,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;server&#34;</span>,
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;main&#34;</span>: <span style="color:#e6db74">&#34;index.js&#34;</span>,
  <span style="color:#f92672">&#34;scripts&#34;</span>: {
    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;./node_modules/nodemon/bin/nodemon.js src/app.js&#34;</span>,
    <span style="color:#f92672">&#34;test&#34;</span>: <span style="color:#e6db74">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
  },
  <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;license&#34;</span>: <span style="color:#e6db74">&#34;ISC&#34;</span>
}
</code></pre></div><p>Lets confirm everything is working as expected. Run the command,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm run start
</code></pre></div><p>And direct your browser to <a href="http://localhost:8081">http://localhost:8081</a>. Update the test function in src/app.js to</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Test handler
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/test&#39;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(
    [{
      <span style="color:#a6e22e">serviceName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;test&#39;</span>,
      <span style="color:#a6e22e">isRunning</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
    }]
  )
})
</code></pre></div><p>Save the file and refresh your browser. You should now see the updated test handler. Our backend is now set up for basic testing.</p>
<h3 id="frontend-configuration">Frontend Configuration</h3>
<p>Let's ensure everything is working correctly. Switch back to root of the project,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cd ..
</code></pre></div><p>Install the base packages we'll need for this project.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm install axios
</code></pre></div><p>Well use the axios library to make http requests to our backend service.
run,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">npm run dev
</code></pre></div><p>Open your browser to: <a href="http://localhost:8081">http://localhost:8081</a> where you should see something similar to the image below.</p>
<figure>
    <img src="/images/vue.png"/> 
</figure>

<p>Great! Everything seems to be working. Let's begin by cleaning up some of the boilerplate provided by vue init and creating our src directory from scratch.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo rm -rf src<span style="color:#ae81ff">\*</span>
</code></pre></div><h4 id="main-dot-js">main.js</h4>
<p>Create the entry-point to our vue application under src.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">touch src<span style="color:#ae81ff">\m</span>ain.js
</code></pre></div><p>Edit the file to contain,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#75715e">// The Vue build version to load with the `import` command
</span><span style="color:#75715e"></span><span style="color:#75715e">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Vue</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;vue&#39;</span>
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">App</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./App&#39;</span>
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./router&#39;</span>

<span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">productionTip</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>

<span style="color:#75715e">/* eslint-disable no-new */</span>
<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
  <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>,
  <span style="color:#a6e22e">router</span>,
  <span style="color:#a6e22e">components</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">App</span> },
  <span style="color:#a6e22e">template</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&lt;App/&gt;&#39;</span>
})
</code></pre></div><h4 id="root-vue">Root Vue</h4>
<p>Create the root vue file,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ touch src/App.Vue
</code></pre></div><p>Edit the file to contain,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
    &lt;<span style="color:#f92672">router</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">view</span>/&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;App&#39;</span>
}
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><h4 id="vue-router">Vue Router</h4>
<p>Create the router directory,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir src/router
</code></pre></div><p>Create the index.js file that declares our apps routes,</p>
<pre><code class="language-nil" data-lang="nil">$ touch src/router/index.js
</code></pre><p>Edit the file to contain,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Vue</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;vue&#39;</span>
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Router</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;vue-router&#39;</span>
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">HelloWorld</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@/components/Home&#39;</span>

<span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">Router</span>)

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Router</span>({
  <span style="color:#a6e22e">mode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;history&#39;</span>,
  <span style="color:#a6e22e">routes</span><span style="color:#f92672">:</span> [
    {
      <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/&#39;</span>,
      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Home&#39;</span>,
      <span style="color:#a6e22e">component</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Home</span>
    }
  ]
})
</code></pre></div><h4 id="services-directory">Services directory</h4>
<p>Create the services directory to contain the code that connects to our backend api,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir src/services
</code></pre></div><p>Create a file called Api.js and add the following to the file,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">axios</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;axios&#39;</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span>() =&gt; {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">create</span>({
    <span style="color:#a6e22e">baseURL</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">http://localhost:8081</span><span style="color:#e6db74">`</span>
  })
}
</code></pre></div><p>In the same file let's add another file TestService.js that will make requests to our backend.</p>
<p>Add to the file,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Api</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@/services/Api&#39;</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">testStatus</span> () {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Api</span>().<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;test&#39;</span>)
  }
}
</code></pre></div><h4 id="home-component">Home Component</h4>
<p>Create the components directory,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir src/components
</code></pre></div><p>Create the Home component</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">touch src/components/Home.vue
</code></pre></div><p>Add to the Home.vue file,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span>&gt;
    {{ <span style="color:#a6e22e">status</span> }}
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">TestService</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@/services/TestService&#39;</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Home&#39;</span>,
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> []
</code></pre></div><h4 id="assets">Assets</h4>
<p>Finally create a directory to hold any future assets.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir src/assets
</code></pre></div><p>If you stopped the dev server run npm run dev
Check to see if everything was created properly at <a href="http://localhost:8081">http://localhost:8081</a></p>
<figure>
    <img src="/images/vue-assets.png"/> 
</figure>

<p>If it looks similar to the picture above our frontend and backend our now connected!</p>
<h3 id="deploying-the-application">Deploying the application</h3>
<p>Now that the frontend and backend are running successfully on the local machine,
it's time to provision the server that we will deploy the boilerplate
application on.</p>
<p>The rest of the post assumes you have a remote server to deploy the application
to using any hosting provider of your choice (aws, google cloud, azure,
digitalocean, etc.)</p>
<h4 id="mongodb">MongoDB</h4>
<p>SSH into the remote server and follow the previous instructions used to
provision our local machine.</p>
<h4 id="nginx">nginx</h4>
<p>Right now we are running the backend on 8081. A vast majority of the time users
should be able to reach the frontend and backend under a single ip
address/domain. In order to achieve this we have to use a reverse proxy to
redirect incoming requests to www.[your-domain-name].com to our built frontend
code and www.[your-domain-name].com/api to our express app running on port 8081.</p>
<p>Before we begin configuring the nginx to reverse proxy incoming requests we'll
need to move the code on our local machine to the remote server</p>
<h4 id="push-project-to-the-remote-server">Push project to the remote server</h4>
<p>On the remote server change your working directory to <em>var/www</em>. We'll need to
define where our built project resides which will make more sense later when we
get to setting the nginx configuration.</p>
<p>Using git we can push the code to a remote repository, then clone and build the
application on the host server following the same steps above to provision the
remote server with nodejs and npm.</p>
<p>Another option would be to compress the project folder and copy it over to the
target server, although using this method results in losing the benefit of
source control.</p>
<p>Once the project is under <em>var/www/<!-- raw HTML omitted --></em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cd &lt;project&gt;
</code></pre></div><p>And build the vue app for production.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ npm run build
</code></pre></div><p>When the build completes, you should see a new folder under the root project
directory called dist, this is the folder nginx should serve when a client makes
a request.</p>
<h4 id="host-server-configuration">Host Server Configuration</h4>
<p>Now that the necessary files have been pushed and built it is time to configure
nginx to serve our boilerplate application.</p>
<p>Install nginx,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo apt-get update <span style="color:#f92672">&amp;&amp;</span> sudo apt-get upgrade sudo apt-get install nginx -y
</code></pre></div><p>Confirm nginx is installed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo systemctl status nginx
</code></pre></div><p>Configure nginx to start on system bootup. sudo systemctl enable nginx</p>
<p>Using your preferred text editor, edit the nginx config to serve the application
over port 80. The config file can be found at</p>
<pre><code class="language-nil" data-lang="nil">/etc/nginx/sites-available/default
</code></pre><p>Edit the file to match the following,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">server</span> {
  <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span> <span style="color:#e6db74">default_server</span>;
  <span style="color:#f92672">server_name</span> <span style="color:#e6db74">&lt;server_ip/domain</span> <span style="color:#e6db74">name&gt;</span>;

  <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
    <span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/&lt;project&gt;/dist</span>;
    <span style="color:#f92672">try_files</span> $uri <span style="color:#e6db74">/index.html</span>;
  }

  <span style="color:#f92672">location</span> <span style="color:#e6db74">/files/</span> {
    <span style="color:#f92672">autoindex</span> <span style="color:#66d9ef">on</span>;
    <span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/&lt;project&gt;dist/static</span>;
  }

  <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/</span> {
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $http_host;
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-NginX-Proxy</span> <span style="color:#e6db74">true</span>;
    <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8081/</span>;
    <span style="color:#f92672">proxy_redirect</span> <span style="color:#66d9ef">off</span>;
    <span style="color:#f92672">proxy_http_version</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">.1</span>;
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade</span> $http_upgrade;
    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">&#34;upgrade&#34;</span>;
    <span style="color:#f92672">proxy_redirect</span> <span style="color:#66d9ef">off</span>;
    <span style="color:#f92672">proxy_set_header</span>   <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
  }
}
</code></pre></div><p>Update nginx to read the new config file.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ sudo systemctl restart nginx
</code></pre></div><p>The last thing we need to do is edit the Api.js file to use the correct domain
name/ip address as the baseURL.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">axios</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;axios&#39;</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span>() =&gt; { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">create</span>({ <span style="color:#a6e22e">baseURL</span><span style="color:#f92672">:</span>
  <span style="color:#e6db74">`</span><span style="color:#e6db74">http://&lt;server_ip/domain&gt;/api</span><span style="color:#e6db74">`</span> }) } <span style="color:#ae81ff">1234567</span>
</code></pre></div><p>If all went well, directing your browser to the ip/domain name of the server
should serve up the test home page.</p>
<p>This concludes the basic setup for a MEVN stack project.</p>
<h2 id="synology-setup"><!-- raw HTML omitted -->TODO<!-- raw HTML omitted --> Synology setup</h2>
<h2 id="emacs-setup"><!-- raw HTML omitted -->TODO<!-- raw HTML omitted --> Emacs setup</h2>
<h2 id="blog-setup"><!-- raw HTML omitted -->TODO<!-- raw HTML omitted --> Blog setup</h2>
<h2 id="thoughts-on-current-state-of-affairs"><!-- raw HTML omitted -->TODO<!-- raw HTML omitted --> Thoughts on current state of affairs</h2>
</div>
		</div>
		

		
			<article>
  <div class="post-title">
	<h1>
      <a href="http://example.org/posts/setting_up_postgresql_on_macos/">Setting up PostgreSQL on MacOS
      </a>
    </h1>
	<time class="time">Feb 18, 2019 </time>
  </div>
  
</article>

		
			<article>
  <div class="post-title">
	<h1>
      <a href="http://example.org/posts/moving_from_san_diego_to_austin/">Moving from San Diego to Austin
      </a>
    </h1>
	<time class="time">Oct 9, 2018 </time>
  </div>
  
</article>

		
			<article>
  <div class="post-title">
	<h1>
      <a href="http://example.org/posts/setting_up_openvpn_on_gcp/">Setting up OpenVPN on GCP
      </a>
    </h1>
	<time class="time">Oct 8, 2018 </time>
  </div>
  
</article>

		
			<article>
  <div class="post-title">
	<h1>
      <a href="http://example.org/posts/a_new_start/">A New Start
      </a>
    </h1>
	<time class="time">May 31, 2018 </time>
  </div>
  
</article>

		
			<article>
  <div class="post-title">
	<h1>
      <a href="http://example.org/posts/creating_a_mevn_stack_boilerplate/">Creating a MEVN stack boilerplate
      </a>
    </h1>
	<time class="time">Jun 12, 2018 </time>
  </div>
  
</article>

		
		<div>

1 of 1

</div>

	</main>

        </main>
        <footer>
            
                <footer>
	<p>&copy; 2020 Mikey O&#39;Brien</a></p>
</footer>

            
        </footer>
    </div>
</body>
</html>
